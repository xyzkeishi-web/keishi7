<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å•é¡Œè¨ºæ–­ãƒ„ãƒ¼ãƒ« - Scroll Fix Diagnostic Tool</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        .diagnostic-section {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .button {
            background-color: #007cba;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .button:hover {
            background-color: #005a87;
        }
        .fix-button {
            background-color: #28a745;
        }
        .fix-button:hover {
            background-color: #218838;
        }
        .results {
            margin-top: 15px;
            padding: 15px;
            background-color: white;
            border-radius: 5px;
            border-left: 4px solid #007cba;
        }
        .issue {
            color: #dc3545;
            font-weight: bold;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å•é¡Œè¨ºæ–­ãƒ„ãƒ¼ãƒ«</h1>
            <h2>Scroll Issue Diagnostic Tool</h2>
            <p>ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€Webãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å•é¡Œã‚’è¨ºæ–­ã—ã€ä¿®æ­£ã—ã¾ã™ã€‚<br>
            This tool diagnoses and fixes scrolling issues on web pages.</p>
        </div>

        <div class="diagnostic-section">
            <h3>ğŸ“‹ ã‚¹ãƒ†ãƒƒãƒ—1: å•é¡Œã®è¨ºæ–­ (Step 1: Diagnose Issues)</h3>
            <p>ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–¢é€£ã®å•é¡Œã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ï¼š</p>
            <button class="button" onclick="diagnoseScrollIssues()">è¨ºæ–­é–‹å§‹ (Start Diagnosis)</button>
            <div id="diagnosis-results" class="results" style="display: none;"></div>
        </div>

        <div class="diagnostic-section">
            <h3>ğŸ› ï¸ ã‚¹ãƒ†ãƒƒãƒ—2: è‡ªå‹•ä¿®æ­£ (Step 2: Auto Fix)</h3>
            <p>æ¤œå‡ºã•ã‚ŒãŸå•é¡Œã‚’è‡ªå‹•ã§ä¿®æ­£ã—ã¾ã™ï¼š</p>
            <button class="button fix-button" onclick="autoFixScrollIssues()">è‡ªå‹•ä¿®æ­£å®Ÿè¡Œ (Auto Fix)</button>
            <div id="fix-results" class="results" style="display: none;"></div>
        </div>

        <div class="diagnostic-section">
            <h3>ğŸ“ ã‚¹ãƒ†ãƒƒãƒ—3: æ‰‹å‹•ä¿®æ­£ã‚³ãƒ¼ãƒ‰ (Step 3: Manual Fix Code)</h3>
            <p>æ‰‹å‹•ã§CSSã‚’ä¿®æ­£ã™ã‚‹å ´åˆã®å‚è€ƒã‚³ãƒ¼ãƒ‰ï¼š</p>
            <button class="button" onclick="showManualFix()">æ‰‹å‹•ä¿®æ­£ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º (Show Manual Fix)</button>
            <div id="manual-fix" class="results" style="display: none;"></div>
        </div>

        <div class="warning">
            <strong>âš ï¸ æ³¨æ„ (Warning):</strong><br>
            ã“ã®ãƒ„ãƒ¼ãƒ«ã¯è¨ºæ–­ã¨ä¸€æ™‚çš„ãªä¿®æ­£ã‚’è¡Œã„ã¾ã™ã€‚æ’ä¹…çš„ãªä¿®æ­£ã«ã¯ã€å®Ÿéš›ã®CSSãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>
            This tool provides diagnosis and temporary fixes. Permanent fixes require editing the actual CSS files.
        </div>
    </div>

    <script>
        function diagnoseScrollIssues() {
            const resultsDiv = document.getElementById('diagnosis-results');
            resultsDiv.style.display = 'block';
            
            let issues = [];
            let results = '<h4>è¨ºæ–­çµæœ (Diagnosis Results):</h4>';
            
            // Check body and html overflow
            const bodyOverflow = getComputedStyle(document.body).overflow;
            const htmlOverflow = getComputedStyle(document.documentElement).overflow;
            
            if (bodyOverflow === 'hidden') {
                issues.push('bodyè¦ç´ ã«overflow:hiddenãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™');
            }
            if (htmlOverflow === 'hidden') {
                issues.push('htmlè¦ç´ ã«overflow:hiddenãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™');
            }
            
            // Check for problematic height settings
            const bodyHeight = getComputedStyle(document.body).height;
            const htmlHeight = getComputedStyle(document.documentElement).height;
            
            if (bodyHeight === '100vh' || htmlHeight === '100vh') {
                issues.push('body/htmlè¦ç´ ã«100vhã®é«˜ã•ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™');
            }
            
            // Check for hero sections with problematic CSS
            const heroSections = document.querySelectorAll('.section-hero, .hero, .banner, section[class*="hero"]');
            heroSections.forEach((section, index) => {
                const styles = getComputedStyle(section);
                if (styles.height === '100vh') {
                    issues.push(`ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³${index + 1}ã«100vhã®é«˜ã•ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™`);
                }
                if (styles.position === 'fixed' || styles.position === 'absolute') {
                    issues.push(`ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³${index + 1}ã«position:${styles.position}ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™`);
                }
                if (styles.overflow === 'hidden') {
                    issues.push(`ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³${index + 1}ã«overflow:hiddenãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™`);
                }
            });
            
            // Check document height vs window height
            const documentHeight = Math.max(
                document.body.scrollHeight,
                document.body.offsetHeight,
                document.documentElement.clientHeight,
                document.documentElement.scrollHeight,
                document.documentElement.offsetHeight
            );
            
            if (documentHeight <= window.innerHeight) {
                issues.push('ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®é«˜ã•ãŒç”»é¢ã®é«˜ã•ä»¥ä¸‹ã§ã™ï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸è¶³ã®å¯èƒ½æ€§ï¼‰');
            }
            
            if (issues.length === 0) {
                results += '<div class="success">âœ… ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–¢é€£ã®å•é¡Œã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ</div>';
            } else {
                results += '<div class="issue">ğŸš¨ ä»¥ä¸‹ã®å•é¡ŒãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ:</div>';
                issues.forEach(issue => {
                    results += `<div>â€¢ ${issue}</div>`;
                });
            }
            
            results += `<div style="margin-top: 15px;">
                <strong>æŠ€è¡“æƒ…å ±:</strong><br>
                â€¢ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé«˜ã•: ${documentHeight}px<br>
                â€¢ ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é«˜ã•: ${window.innerHeight}px<br>
                â€¢ body overflow: ${bodyOverflow}<br>
                â€¢ html overflow: ${htmlOverflow}
            </div>`;
            
            resultsDiv.innerHTML = results;
        }
        
        function autoFixScrollIssues() {
            const resultsDiv = document.getElementById('fix-results');
            resultsDiv.style.display = 'block';
            
            let fixes = [];
            
            // Fix body and html overflow
            if (getComputedStyle(document.body).overflow === 'hidden') {
                document.body.style.overflow = 'auto';
                fixes.push('bodyè¦ç´ ã®overflow:hiddenã‚’ä¿®æ­£ã—ã¾ã—ãŸ');
            }
            if (getComputedStyle(document.documentElement).overflow === 'hidden') {
                document.documentElement.style.overflow = 'auto';
                fixes.push('htmlè¦ç´ ã®overflow:hiddenã‚’ä¿®æ­£ã—ã¾ã—ãŸ');
            }
            
            // Fix hero sections
            const heroSections = document.querySelectorAll('.section-hero, .hero, .banner, section[class*="hero"]');
            heroSections.forEach((section, index) => {
                const styles = getComputedStyle(section);
                if (styles.height === '100vh') {
                    section.style.minHeight = '100vh';
                    section.style.height = 'auto';
                    fixes.push(`ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³${index + 1}ã®height:100vhã‚’min-height:100vhã«ä¿®æ­£ã—ã¾ã—ãŸ`);
                }
            });
            
            // Add scroll behavior
            document.documentElement.style.scrollBehavior = 'smooth';
            fixes.push('ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã—ã¾ã—ãŸ');
            
            let results = '<h4>ä¿®æ­£çµæœ (Fix Results):</h4>';
            if (fixes.length === 0) {
                results += '<div class="success">âœ… ä¿®æ­£ãŒå¿…è¦ãªé …ç›®ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>';
            } else {
                results += '<div class="success">âœ… ä»¥ä¸‹ã®ä¿®æ­£ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ:</div>';
                fixes.forEach(fix => {
                    results += `<div>â€¢ ${fix}</div>`;
                });
                results += '<div style="margin-top: 15px;"><strong>ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚</strong></div>';
            }
            
            resultsDiv.innerHTML = results;
        }
        
        function showManualFix() {
            const resultsDiv = document.getElementById('manual-fix');
            resultsDiv.style.display = 'block';
            
            const cssCode = `/* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å•é¡Œã®ä¿®æ­£CSS */

/* åŸºæœ¬çš„ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®æ­£ */
html, body {
    overflow: auto !important;
    height: auto !important;
    scroll-behavior: smooth;
}

/* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¿®æ­£ */
.section-hero,
.hero,
section[class*="hero"] {
    /* 100vhã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã®ä¿®æ­£ */
    min-height: 100vh !important;
    height: auto !important;
    
    /* å›ºå®šä½ç½®ã®ä¿®æ­£ */
    position: relative !important;
    
    /* ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã®ä¿®æ­£ */
    overflow: visible !important;
}

/* ã‚ˆã‚Šå…·ä½“çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ãŒå¿…è¦ãªå ´åˆ */
.section-hero.front-page {
    min-height: 100vh !important;
    height: auto !important;
}

/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç„¡åŠ¹åŒ–ã‚’è§£é™¤ */
body.no-scroll,
html.no-scroll {
    overflow: auto !important;
}

/* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
@media (max-width: 768px) {
    .section-hero,
    .hero {
        min-height: 50vh !important;
    }
}`;

            const jsCode = `// JavaScript ã«ã‚ˆã‚‹å‹•çš„ä¿®æ­£

// å³åº§ã«å®Ÿè¡Œã•ã‚Œã‚‹ä¿®æ­£
(function() {
    // overflow:hidden ã®è§£é™¤
    document.body.style.overflow = 'auto';
    document.documentElement.style.overflow = 'auto';
    
    // no-scroll ã‚¯ãƒ©ã‚¹ã®å‰Šé™¤
    document.body.classList.remove('no-scroll');
    document.documentElement.classList.remove('no-scroll');
    
    // ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¿®æ­£
    const heroSections = document.querySelectorAll('.section-hero, .hero, section[class*="hero"]');
    heroSections.forEach(section => {
        const currentHeight = getComputedStyle(section).height;
        if (currentHeight === '100vh') {
            section.style.minHeight = '100vh';
            section.style.height = 'auto';
        }
    });
})();

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†å¾Œã®ä¿®æ­£
document.addEventListener('DOMContentLoaded', function() {
    // è¿½åŠ ã®ä¿®æ­£å‡¦ç†
    console.log('ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¿®æ­£ãŒé©ç”¨ã•ã‚Œã¾ã—ãŸ');
});`;

            resultsDiv.innerHTML = `
                <h4>CSSä¿®æ­£ã‚³ãƒ¼ãƒ‰:</h4>
                <div class="code-block">${cssCode}</div>
                
                <h4>JavaScriptä¿®æ­£ã‚³ãƒ¼ãƒ‰:</h4>
                <div class="code-block">${jsCode}</div>
                
                <div style="margin-top: 15px;">
                    <strong>ä½¿ç”¨æ–¹æ³•:</strong><br>
                    1. ä¸Šè¨˜ã®CSSã‚³ãƒ¼ãƒ‰ã‚’ã‚µã‚¤ãƒˆã®CSSãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ <br>
                    2. ã¾ãŸã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®Consoleã‚¿ãƒ–ã§ä¸Šè¨˜ã®JavaScriptã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œ<br>
                    3. æ’ä¹…çš„ãªä¿®æ­£ã«ã¯ã€ãƒ†ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚„CSSãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ç·¨é›†
                </div>
            `;
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•è¨ºæ–­
        window.addEventListener('load', function() {
            setTimeout(() => {
                diagnoseScrollIssues();
            }, 1000);
        });
    </script>
</body>
</html>